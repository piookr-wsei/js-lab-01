<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotePocket</title>
    <style>
        .note {
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
            color: white;
        }
        .pinned {
            border: 2px solid gold;
        }
    </style>
</head>
<body>
    <h1>NotePocket</h1>
    <form id="noteForm">
        <input type="text" id="title" placeholder="Title" required>
        <textarea id="description" placeholder="Description" required></textarea>
        <input type="color" id="color" value="#ffffff">
        <label><input type="checkbox" id="pin"> Pin Note</label>
        <button type="submit">Add Note</button>
    </form>
    <div id="notesContainer"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("noteForm");
            const notesContainer = document.getElementById("notesContainer");

            const loadNotes = () => {
                const notes = JSON.parse(localStorage.getItem("notes") || "[]");
                notesContainer.innerHTML = "";
                // Sort notes to keep the pinned ones at the top
                notes.sort((a, b) => b.pin - a.pin);
                notes.forEach((note, index) => {
                    const noteElement = document.createElement("div");
                    noteElement.className = `note ${note.pin ? "pinned" : ""}`;
                    noteElement.style.backgroundColor = note.color;
                    noteElement.innerHTML = `
                        <h3>${note.title}</h3>
                        <p>${note.description}</p>
                        <small>${new Date(note.date).toLocaleString()}</small>
                        <button onclick="deleteNote(${index})">Delete</button>
                        <button onclick="editNote(${index})">Edit</button>
                        <button onclick="togglePin(${index})">Toggle Pin</button>
                    `;
                    notesContainer.appendChild(noteElement);
                });
            };

            const saveNote = (note) => {
                const notes = JSON.parse(localStorage.getItem("notes") || "[]");
                notes.push(note);
                localStorage.setItem("notes", JSON.stringify(notes));
                loadNotes();
            };

            form.addEventListener("submit", (e) => {
                e.preventDefault();
                const title = document.getElementById("title").value;
                const description = document.getElementById("description").value;
                const color = document.getElementById("color").value;
                const pin = document.getElementById("pin").checked;
                const note = { title, description, color, date: new Date().toISOString(), pin };
                saveNote(note);
                form.reset();
            });

            window.deleteNote = (index) => {
                const notes = JSON.parse(localStorage.getItem("notes") || "[]");
                notes.splice(index, 1);
                localStorage.setItem("notes", JSON.stringify(notes));
                loadNotes();
            };

            window.editNote = (index) => {
                const notes = JSON.parse(localStorage.getItem("notes") || "[]");
                const note = notes[index];
                document.getElementById("title").value = note.title;
                document.getElementById("description").value = note.description;
                document.getElementById("color").value = note.color;
                document.getElementById("pin").checked = note.pin;
                notes.splice(index, 1); // Remove the note being edited
                localStorage.setItem("notes", JSON.stringify(notes));
                loadNotes();
            };

            window.togglePin = (index) => {
                const notes = JSON.parse(localStorage.getItem("notes") || "[]");
                notes[index].pin = !notes[index].pin; // Toggle the pin status
                localStorage.setItem("notes", JSON.stringify(notes));
                loadNotes();
            };

            loadNotes();
        });
    </script>
</body>
</html>
